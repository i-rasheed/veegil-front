(this["webpackJsonpmern-auth"]=this["webpackJsonpmern-auth"]||[]).push([[0],{30:function(e,t,a){e.exports=a(59)},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(27),c=a.n(r),s=a(2),o=a.n(s),u=a(6),i=a(1),m=a(4),p=a(11),E=a(5),d=a.n(E),b=Object(n.createContext)(null);function g(){var e=Object(n.useContext)(b),t=e.userData,a=e.setUserData,r=Object(p.f)();return l.a.createElement("nav",{className:"auth-options"},t.user?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onClick:function(){a({token:void 0,user:void 0}),localStorage.setItem("auth-token",""),r.push("/")}},"Log out")," |",l.a.createElement("button",{className:"login",onClick:function(){return r.push("/products")}},"View Products"),"|",l.a.createElement("button",{className:"login",onClick:function(){return r.push("/NewProduct")}},"Add Product")):l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onClick:function(){return r.push("/register")}},"Register")," |",l.a.createElement("button",{className:"login",onClick:function(){return r.push("/login")}},"Log in")))}function v(){return l.a.createElement("header",null,l.a.createElement("div",{class:"navbar navbar-fixed-top",id:"main-nav"},l.a.createElement("div",{className:"container"},l.a.createElement("button",{"data-target":".nav-collapse","data-toggle":"collapse",class:"btn btn-navbar",type:"button"},l.a.createElement("span",{class:"icon-bar"}),l.a.createElement("span",{class:"icon-bar"}),l.a.createElement("span",{class:"icon-bar"})),l.a.createElement("nav",{class:"nav-collapse collapse",style:{height:"0px"}},l.a.createElement("ul",{class:"nav"},l.a.createElement("li",{class:"active"},l.a.createElement(m.b,{to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement("p",null,"My Account ")),l.a.createElement("li",null,l.a.createElement("p",null,"Shopping Cart")),l.a.createElement("li",null,l.a.createElement("p",null,"Checkout")))),l.a.createElement("ul",{class:"nav pull-right left-tablet"},l.a.createElement("li",{class:"dropdown hover"},l.a.createElement("p",{"data-toggle":"",class:"dropdown-toggle"},"US Doller ",l.a.createElement("b",{class:"caret"})),l.a.createElement("ul",{class:"dropdown-menu currency"},l.a.createElement("li",null,l.a.createElement("p",null,"US Doller")),l.a.createElement("li",null,l.a.createElement("p",null,"Euro ")),l.a.createElement("li",null,l.a.createElement("p",null,"British Pound")))),l.a.createElement("li",{class:"dropdown hover"},l.a.createElement("p",{"data-toggle":"",class:"dropdown-toggle"},"English ",l.a.createElement("b",{class:"caret"})),l.a.createElement("ul",{class:"dropdown-menu language"},l.a.createElement("li",null,l.a.createElement("p",null,"English")),l.a.createElement("li",null,l.a.createElement("p",null,"Spanish")),l.a.createElement("li",null,l.a.createElement("p",null,"German")))),l.a.createElement("li",{class:"dropdown hover topcart"},l.a.createElement("p",{class:"dropdown-toggle"},l.a.createElement("i",{class:"carticon"})," Shopping Cart ",l.a.createElement("span",{class:"label label-success font14"},"1 item(s)")," - $589.50",l.a.createElement("b",{class:"caret"})),l.a.createElement("ul",{class:"dropdown-menu topcartopen"},l.a.createElement("li",null,l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{class:"image"},l.a.createElement("p",null,l.a.createElement("img",{title:"product",alt:"product",src:"assets/img/prodcut-40x40.jpg",height:"50",width:"50"}))),l.a.createElement("td",{class:"name"},l.a.createElement("p",null,"MacBook")),l.a.createElement("td",{class:"quantity"},"x\xa01"),l.a.createElement("td",{class:"total"},"$589.50"),l.a.createElement("td",{class:"remove"},l.a.createElement("i",{class:"icon-remove"}))),l.a.createElement("tr",null,l.a.createElement("td",{class:"image"},l.a.createElement("p",null,l.a.createElement("img",{title:"product",alt:"product",src:"assets/img/prodcut-40x40.jpg",height:"50",width:"50"}))),l.a.createElement("td",{class:"name"},l.a.createElement("p",null,"MacBook")),l.a.createElement("td",{class:"quantity"},"x\xa01"),l.a.createElement("td",{class:"total"},"$589.50"),l.a.createElement("td",{class:"remove"},l.a.createElement("i",{class:"icon-remove "}))))),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{class:"textright"},l.a.createElement("b",null,"Sub-Total:")),l.a.createElement("td",{class:"textright"},"$500.00")),l.a.createElement("tr",null,l.a.createElement("td",{class:"textright"},l.a.createElement("b",null,"Eco Tax (-2.00):")),l.a.createElement("td",{class:"textright"},"$2.00")),l.a.createElement("tr",null,l.a.createElement("td",{class:"textright"},l.a.createElement("b",null,"VAT (17.5%):")),l.a.createElement("td",{class:"textright"},"$87.50")),l.a.createElement("tr",null,l.a.createElement("td",{class:"textright"},l.a.createElement("b",null,"Total:")),l.a.createElement("td",{class:"textright"},"$589.50")))),l.a.createElement("div",{class:"well pull-right"},l.a.createElement("p",{class:"btn btn-success"},"View Cart"),l.a.createElement("p",{class:"btn btn-success"},"Checkout")))))))),l.a.createElement("div",{class:"header-white"},l.a.createElement("div",{class:"container"},l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"span4"},l.a.createElement(m.b,{to:"/"},l.a.createElement("h1",null,"Veegil Product Store"))),l.a.createElement("div",{class:"span8"},l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"pull-right logintext"},"Welcome,  you can ",l.a.createElement(g,null))))))))}function h(){var e=Object(n.useContext)(b).userData;return l.a.createElement("div",null,e.user?l.a.createElement("h1",null,"Welcome ",e.user.displayName):l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("div",{class:"header-white"},l.a.createElement("div",{class:"container"},l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"span4"}),l.a.createElement("div",{class:"span8"},l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"pull-right logintext"},"Welcome Px,  you can ",l.a.createElement(m.b,{to:"/login"},"login "),"or ",l.a.createElement(m.b,{to:"/register"},"Register"))),l.a.createElement("form",{class:"form-search marginnull topsearch pull-right"},l.a.createElement("input",{type:"text",class:"input-large search-query search-icon-top",value:"Search here...",onFocus:"if (this.value=='Search here...') this.value='';",onblur:"if (this.value=='') this.value='Search here...';"})))))))))}function f(e){return l.a.createElement("div",{className:"error-notice"},l.a.createElement("span",null,e.message),l.a.createElement("button",{onClick:e.clearError},"X"))}function x(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),s=Object(i.a)(c,2),m=s[0],E=s[1],g=Object(n.useState)(),v=Object(i.a)(g,2),h=v[0],x=v[1],k=Object(n.useContext)(b).setUserData,j=Object(p.f)(),O=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:a,password:m},e.next=5,d.a.post("https://veegil-product-store.herokuapp.com/users/login",n);case 5:l=e.sent,k({token:l.data.token,user:l.data.user}),localStorage.setItem("auth-token",l.data.token),j.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response.data.message&&x(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement("div",{class:"span9"},l.a.createElement("h1",{class:"headingmain"},l.a.createElement("span",null,"Log in")),l.a.createElement("br",null),l.a.createElement("form",{onSubmit:O},l.a.createElement("h3",{class:"heading3"},"Your Login Details"),h&&l.a.createElement(f,{message:h,clearError:function(){return x(void 0)}}),l.a.createElement("div",{class:"registerbox"},l.a.createElement("fieldset",null,l.a.createElement("div",{class:"control-group"},l.a.createElement("label",{class:"control-label"},l.a.createElement("span",{class:"red"},"*")," Email: "),l.a.createElement("div",{class:"controls"},l.a.createElement("input",{type:"text",class:"input-xlarge",onChange:function(e){r(e.target.value)}}))),l.a.createElement("div",{class:"control-group"},l.a.createElement("label",{class:"control-label"},l.a.createElement("span",{class:"red"},"*")," Password:"),l.a.createElement("div",{class:"controls"},l.a.createElement("input",{type:"password",class:"input-xlarge",onChange:function(e){E(e.target.value)}}))),l.a.createElement("button",{type:"Submit",class:"btn btn-success"},"Login"))))))}function k(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),s=Object(i.a)(c,2),E=s[0],g=s[1],v=Object(n.useState)(),h=Object(i.a)(v,2),x=h[0],k=h[1],j=Object(n.useState)(),O=Object(i.a)(j,2),w=O[0],S=O[1],y=Object(n.useState)(),C=Object(i.a)(y,2),D=C[0],N=C[1],P=Object(n.useState)(),I=Object(i.a)(P,2),A=I[0],$=I[1],U=Object(n.useContext)(b).setUserData,L=Object(p.f)(),V=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:a,password:E,passwordCheck:x,displayName:w,role:D},e.next=5,d.a.post("https://veegil-product-store.herokuapp.com/users/register",n);case 5:return e.next=7,d.a.post("https://veegil-product-store.herokuapp.com/users/login",{email:a,password:E});case 7:l=e.sent,U({token:l.data.token,user:l.data.user}),localStorage.setItem("auth-token",l.data.token),L.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.response.data.message&&$(e.t0.response.data.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement("div",{class:"span9"},l.a.createElement("h1",{class:"headingmain"},l.a.createElement("span",null,"Register Account")),l.a.createElement("p",null," If you already have an account with us, please login at the ",l.a.createElement(m.b,{to:"/login"},"login page.")),l.a.createElement("br",null),l.a.createElement("form",{onSubmit:V},l.a.createElement("h3",{class:"heading3"},"Your Personal Details"),A&&l.a.createElement(f,{message:A,clearError:function(){return $(void 0)}}),l.a.createElement("div",{class:"registerbox"},l.a.createElement("fieldset",null,l.a.createElement("div",{class:"control-group"},l.a.createElement("label",{class:"control-label"},l.a.createElement("span",{class:"red"},"*")," Email: "),l.a.createElement("div",{class:"controls"},l.a.createElement("input",{type:"text",class:"input-xlarge",onChange:function(e){r(e.target.value)}}))),l.a.createElement("div",{class:"control-group"},l.a.createElement("label",{class:"control-label"},l.a.createElement("span",{class:"red"},"*")," Password:"),l.a.createElement("div",{class:"controls"},l.a.createElement("input",{type:"password",class:"input-xlarge",onChange:function(e){g(e.target.value)}}))),l.a.createElement("div",{class:"control-group"},l.a.createElement("label",{class:"control-label"},l.a.createElement("span",{class:"red"},"*")," Retype Password:"),l.a.createElement("div",{class:"controls"},l.a.createElement("input",{type:"password",class:"input-xlarge",onChange:function(e){k(e.target.value)}}))),l.a.createElement("div",{class:"control-group"},l.a.createElement("label",{class:"control-label"},l.a.createElement("span",{class:"red"},"*")," Display Name:"),l.a.createElement("div",{class:"controls"},l.a.createElement("input",{type:"text",class:"input-xlarge",onChange:function(e){S(e.target.value)}}))),l.a.createElement("label",{for:"cars"},"Choose a role:"),l.a.createElement("select",{id:"cars",name:"carlist",form:"carform",onChange:function(e){return N(e.target.value)}},l.a.createElement("option",{value:"basic"},"basic"),l.a.createElement("option",{value:"admin"},"admin"))," ",l.a.createElement("br",null),l.a.createElement("button",{type:"Submit",class:"btn btn-success"},"Submit"))))))}a(58);var j=function(e){return l.a.createElement("div",{className:"delmodal"},l.a.createElement("p",null,"Are you sure you want to delete this product?"),l.a.createElement("button",{className:"cancel",onClick:e.cancel},"cancel"),l.a.createElement("button",{className:"yes",onClick:e.deleteIt},"Yes"))},O=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useContext)(b).userData;return l.a.createElement("div",{className:"itemwrapper"},"admin"===s.user.role?l.a.createElement("section",null,l.a.createElement("div",{class:"container"},l.a.createElement("section",{id:"thumbnails"},l.a.createElement("ul",{class:"thumbnails"},l.a.createElement("li",{class:"span3"},l.a.createElement("p",{class:"prdocutname"},e.name),l.a.createElement("div",{class:"thumbnail"},l.a.createElement("span",{class:"sale tooltip-test"},"Sale"),l.a.createElement("p",null,l.a.createElement("img",{src:"assets/img/product-l1.jpg",alt:""})),l.a.createElement("div",{class:"caption"},l.a.createElement("div",{class:"price pull-left"},l.a.createElement("span",{class:"oldprice"},e.price),l.a.createElement("span",{class:"newprice"},e.price)),l.a.createElement("div",{class:"links pull-left"},l.a.createElement(m.b,{to:"/edit/"+e.id},l.a.createElement("button",{className:"editbutton"},"edit")),l.a.createElement("button",{className:"delbutton",onClick:function(){c(!0)}},"delete"),l.a.createElement("br",null),r&&l.a.createElement(j,{cancel:function(){c(!1)},deleteIt:function(){return e.deleteItem(e.id)}}))))))))):l.a.createElement("section",null,l.a.createElement("div",{class:"container"},l.a.createElement("section",{id:"thumbnails"},l.a.createElement("ul",{class:"thumbnails"},l.a.createElement("li",{class:"span3"},l.a.createElement("p",{class:"prdocutname"},e.name),l.a.createElement("div",{class:"thumbnail"},l.a.createElement("span",{class:"sale tooltip-test"},"Sale"),l.a.createElement("p",null,l.a.createElement("img",{src:"assets/img/product-l1.jpg",alt:""})),l.a.createElement("div",{class:"caption"},l.a.createElement("div",{class:"price pull-left"},l.a.createElement("span",{class:"oldprice"},e.price),l.a.createElement("span",{class:"newprice"},e.price)),l.a.createElement("p",{class:"cartadd pull-right tooltip-test","data-original-title":"Add to Cart"}," Add to Cart "),l.a.createElement("div",{class:"links pull-left"},l.a.createElement("p",{class:"info"},"info"),l.a.createElement("p",{class:"wishlist"},"wishlist"),l.a.createElement("p",{class:"compare"},"compare"),l.a.createElement("br",null))))))))))};function w(e){return l.a.createElement("div",{className:"message-notice"},l.a.createElement("span",null,e.message),l.a.createElement("button",{onClick:e.clearError},"X"))}var S=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),s=Object(i.a)(c,2),m=s[0],p=s[1],E=Object(n.useContext)(b).userData;Object(n.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("https://veegil-product-store.herokuapp.com/products/all",{headers:{"x-auth-token":E.token}});case 2:t=e.sent,console.log(t),r(t.data),console.log(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,E.token]);var g=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.delete("https://veegil-product-store.herokuapp.com/products/"+t,{headers:{"x-auth-token":E.token}});case 2:n=e.sent,console.log(n.data),l=a.filter((function(e){return e._id!==t})),r(l),p(n.data.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,m&&l.a.createElement(w,{message:m,clearError:function(){return p(void 0)}}),l.a.createElement("ul",{className:"listwrapper"},a.map((function(e){return l.a.createElement(O,{key:e._id,name:e.name,price:e.price,deleteItem:g,id:e._id})}))))},y=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),s=Object(i.a)(c,2),m=s[0],p=s[1],E=Object(n.useState)(),g=Object(i.a)(E,2),v=g[0],h=g[1],x=Object(n.useState)(),k=Object(i.a)(x,2),j=k[0],O=k[1],S=Object(n.useContext)(b).userData,y=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={name:a,price:m},e.next=5,d.a.post("https://veegil-product-store.herokuapp.com/products",n,{headers:{"x-auth-token":S.token}});case 5:l=e.sent,console.log(l.data),O(l.data.message),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response.data.message&&h(e.t0.response.data.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement("div",{class:"span9"},l.a.createElement("h1",{class:"headingmain"},l.a.createElement("span",null,"Add Product")),l.a.createElement("br",null),l.a.createElement("form",{onSubmit:y},l.a.createElement("h3",{class:"heading3"},"Your Product Details"),v&&l.a.createElement(f,{message:v,clearError:function(){return h(void 0)}}),j&&l.a.createElement(w,{message:j,clearError:function(){return O(void 0)}}),l.a.createElement("div",{class:"registerbox"},l.a.createElement("fieldset",null,l.a.createElement("div",{class:"control-group"},l.a.createElement("label",{class:"control-label"},l.a.createElement("span",{class:"red"},"*"),"Product Name: "),l.a.createElement("div",{class:"controls"},l.a.createElement("input",{type:"text",class:"input-xlarge",onChange:function(e){r(e.target.value)}}))),l.a.createElement("div",{class:"control-group"},l.a.createElement("label",{class:"control-label"},l.a.createElement("span",{class:"red"},"*")," Price"),l.a.createElement("div",{class:"controls"},l.a.createElement("input",{type:"text",class:"input-xlarge",onChange:function(e){p(e.target.value)}}))),l.a.createElement("button",{type:"Submit",class:"btn btn-success"},"Add"))))))},C=function(e){var t=Object(n.useState)(),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(),m=Object(i.a)(s,2),E=m[0],g=m[1],v=Object(n.useContext)(b).userData,h=Object(p.f)();Object(n.useEffect)((function(){(function(){var t=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("https://veegil-product-store.herokuapp.com/products/"+e.match.params.id);case 2:a=t.sent,c(a.data.products.name),g(a.data.products.price);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.match.params.id]);var f=function(){var t=Object(u.a)(o.a.mark((function t(a){var n,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={name:r,price:E},t.next=4,d.a.put("https://veegil-product-store.herokuapp.com/products/"+e.match.params.id,n,{headers:{"x-auth-token":v.token}});case 4:l=t.sent,console.log(l.data),h.push("/products");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement("div",{class:"span9"},l.a.createElement("h1",{class:"headingmain"},l.a.createElement("span",null,"Edit Product")),l.a.createElement("br",null),l.a.createElement("form",{onSubmit:f},l.a.createElement("h3",{class:"heading3"},"Your Product Details"),l.a.createElement("div",{class:"registerbox"},l.a.createElement("fieldset",null,l.a.createElement("div",{class:"control-group"},l.a.createElement("label",{class:"control-label"},l.a.createElement("span",{class:"red"},"*"),"Product Name: "),l.a.createElement("div",{class:"controls"},l.a.createElement("input",{type:"text",class:"input-xlarge",value:r,onChange:function(e){c(e.target.value)}}))),l.a.createElement("div",{class:"control-group"},l.a.createElement("label",{class:"control-label"},l.a.createElement("span",{class:"red"},"*")," Price"),l.a.createElement("div",{class:"controls"},l.a.createElement("input",{type:"text",class:"input-xlarge",value:E,onChange:function(e){g(e.target.value)}}))),l.a.createElement("button",{type:"submit",class:"btn btn-success"},"Submit"))))))};function D(){var e=Object(n.useState)({token:void 0,user:void 0}),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,d.a.post("https://veegil-product-store.herokuapp.com/users/tokenIsValid",null,{headers:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,d.a.get("https://veegil-product-store.herokuapp.com/users/",{headers:{"x-auth-token":t}});case 8:a=e.sent,r({token:t,user:a.data});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,null,l.a.createElement(b.Provider,{value:{userData:a,setUserData:r}},l.a.createElement(v,null),l.a.createElement("div",{className:"container"},l.a.createElement(p.c,null,l.a.createElement(p.a,{exact:!0,path:"/",component:h}),l.a.createElement(p.a,{path:"/login",component:x}),l.a.createElement(p.a,{path:"/register",component:k}),l.a.createElement(p.a,{path:"/products",component:S}),l.a.createElement(p.a,{path:"/NewProduct",component:y}),l.a.createElement(p.a,{path:"/edit/:id",component:C}))))))}c.a.render(l.a.createElement(D,null),document.querySelector("#root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.0e2ae726.chunk.js.map